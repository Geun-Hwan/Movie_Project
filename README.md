## ì˜í™” ì˜ˆë§¤ ë° ë¦¬ë·° ì‚¬ì´íŠ¸ ì œì‘ í”„ë¡œì íŠ¸(â—'â—¡'â—)

> ë³¸ í”„ë¡œì íŠ¸ëŠ” cgv í™ˆí˜ì´ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ ì œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.

[ğŸš— cgv.co.kr](https://www.cgv.co.kr)

## ì‚¬ìš©í•œ ê¸°ìˆ  ìŠ¤íƒğŸ«

<img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=white">
<br>
<img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
<img src="https://img.shields.io/badge/oracle-F80000?style=for-the-badge&logo=oracle&logoColor=white">
<img src="https://img.shields.io/badge/bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white">
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">

## ê°œë°œ ê¸°ê°„

2022.04.28- 2022.06.10 (6ì£¼)

## í”„ë¡œì íŠ¸ ì‹¤í–‰ğŸš

mvn tomcat7:run

## ì£¼ìš” ê¸°ëŠ¥ ğŸ±â€ğŸ

### client

1.  íšŒì›ê°€ì…
    - IDì¤‘ë³µí™•ì¸
    - ì´ë©”ì¼ ì¸ì¦
2.  ë¡œê·¸ì¸
3.  ë§ˆì´í˜ì´ì§€
    - íšŒì› ì •ë³´ ìˆ˜ì •
    - íšŒì› íƒˆí‡´ í•˜ê¸°
    - ì˜ˆë§¤ ë‚´ì—­ ë³´ê¸°
    - ë¦¬ë·° ê´€ë¦¬(ìˆ˜ì •/ì‚­ì œ)
    - ë¬¸ì˜ ë‚´ì—­ ë³´ê¸°, ë‹µë³€ í™•ì¸
4.  ì˜í™” ì˜ˆë§¤ í•˜ê¸°
    - ì˜í™” ,ê·¹ì¥, ì‹œê°„,ì¢Œì„ ì„ íƒ
    - ì¹´ì¹´ì˜¤í˜ì´ ê²°ì œ
    - ì„ íƒ ì¢Œì„ ì²˜ë¦¬
    - ì˜ˆì•½ ì¢Œì„ ì²˜ë¦¬
5.  ì˜í™” ë¦¬ë·° ì‘ì„±
    - ë¦¬ë·°,ë³„ì  ì‘ì„±
    - ìˆ˜ì •
    - ì‚­ì œ
    - ì‹ ê³  í•˜ê¸°
    - ì¶”ì²œ í•˜ê¸°
6.  ë¬¸ì˜í•˜ê¸°
    - ë¬¸ì˜ ì‘ì„±
    - íŒŒì¼ ì—…ë¡œë“œ

### admin

1.  ì˜í™” ê´€ë¦¬
    - ì˜í™” ë“±ë¡
    - ìˆ˜ì •
    - ì‚­ì œ
2.  íšŒì› ê´€ë¦¬
    - íšŒì› ì •ë³´ ë³´ê¸°
    - ì˜ˆë§¤ ë‚´ì—­
    - ë¦¬ë·° ë‚´ì—­
    - ë¬¸ì˜ ë‚´ì—­
    - íšŒì› ì •ì§€
    - íšŒì› íƒˆí‡´
3.  ë¬¸ì˜ ê´€ë¦¬
    - ë¬¸ì˜ ì‚­ì œ
    - ë‹µë³€ ì‘ì„±
    - íŒŒì¼ ë‹¤ìš´ë¡œë“œ
4.  ë¦¬ë·° ê´€ë¦¬
    - ë¦¬ë·° ìˆ˜ì •
    - ì‚­ì œ
5.  ì‹ ê³  ì²˜ë¦¬(ë¯¸í¡) - ì‹ ê³  ìœ ì € ì •ì§€ ê¸°ê°„ ì„¤ì • - ì‹ ê³  ì‚­ì œ - ì‹ ê³  ì¤‘ë³µ ì²˜ë¦¬ , ê²½ê³  ê¸°ëŠ¥ (ë¯¸ì™„ì„±)
    <br>

---

## ì£¼ìš” ì½”ë“œğŸ‘€

### ì¹´ì¹´ì˜¤ ê²°ì œ api

iamport í™ˆí˜ì´ì§€ì—ì„œ ë¯¸ë¦¬ ë¶€ì—¬ ë°›ì€ ì½”ë“œë¥¼ ì´ìš©í–ˆë‹¤.<br>
ê²°ì œì„±ê³µì‹œ ì˜ˆì•½ì •ë³´ë¥¼ DBì— ì €ì¥í•˜ë„ë¡ í–ˆìŒ.

```js
$(function(){
       var IMP = window.IMP;
       IMP.init('imp33034326');
       var msg;

       IMP.request_pay({
           pg : 'kakaopay',
           pay_method : 'card',
           merchant_uid : 'merchant_' + new Date().getTime(),
           name : '<%=ticket.getTitle()%> <%=ticket.getPerson()%>ë§¤',
            amount : <%=ticket.getPrice()%>,

       }, function(rsp) {
           if ( rsp.success ) {
               jQuery.ajax({
                   url: "/payments/complete", //cross-domain errorê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì£¼ì„¸ìš”
                   type: 'POST',
                   dataType: 'json',
                   data: {
                       imp_uid : rsp.imp_uid
                       //ê¸°íƒ€ í•„ìš”í•œ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì¶”ê°€ ì „ë‹¬
                   } '''ìƒëµ
```

---

### íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬

```java
@PostMapping("/qnaWrite.do")
	public String qnaWirteDo(@ModelAttribute QnaBoard qna, @RequestParam MultipartFile file, HttpSession session) throws IllegalStateException, IOException{
		String uploadDir = session.getServletContext().getRealPath("/resources/upload/"+qna.getUserid()+"/");
		String fileName = file.getOriginalFilename();
		File dir = new File(uploadDir);
		if(!dir.exists()) {
			dir.mkdirs();
		}
		if(fileName.equals("")) {
			qna.setFileName("");
		}else {
			qna.setFileName(fileName);
			System.out.println(qna.getFileName());
			file.transferTo(new File(uploadDir,fileName));
		}
		System.out.println(uploadDir);
		System.out.println(fileName);
		QnaDAO qdao = new QnaDAO();
		qdao.insertQna(qna);

		return "redirect:/myPage?userid="+qna.getUserid();
	}
```

<br>

### íŒŒì¼ ë‹¤ìš´ë¡œë“œ

```java
@GetMapping("/download")
	public void download(HttpSession session,HttpServletRequest request, HttpServletResponse response) throws IOException {
		String userid=request.getParameter("userid");
		String fileName=request.getParameter("fileName");
		System.out.println(userid);
		System.out.println(fileName);
		String path = session.getServletContext().getRealPath("/resources/upload/"+userid+"/"+fileName);
		byte[] fileByte = FileUtils.readFileToByteArray(new File(path));
		response.setContentType("application/octet-stream");
	    response.setHeader("Content-Disposition", "attachment; fileName=\"" + URLEncoder.encode(fileName, "UTF-8")+"\";");
	    response.setHeader("Content-Transfer-Encoding", "binary");

	    response.getOutputStream().write(fileByte);
	    response.getOutputStream().flush();
	    response.getOutputStream().close();
	}
```

### í˜ì´ì§•ì²˜ë¦¬ğŸ˜‚

í˜ì´ì§• ì²˜ë¦¬ë¥¼ êµ¬í˜„í•  ë•Œ ì›¹í˜ì´ì§€ì˜ ì´ë™ ì—†ì´(ë¹„ë™ê¸°) ì²˜ë¦¬í•˜ê¸° ìœ„í•´<br>

**ajax** ì™€ **session**ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í•˜ì˜€ë‹¤.<br>

í˜ì´ì§•ë²ˆí˜¸ í´ë¦­ì‹œ ajax í†µì‹ ìœ¼ë¡œ í•´ë‹¹ ë²ˆí˜¸ë¥¼ ë„˜ê²¨ ì£¼ì–´ ë¯¸ë¦¬ êµ¬í˜„í•œ ì½”ë“œë¥¼ ì´ìš©í•´ sessionì„ ì €ì¥<br>

htmlì— í•´ë‹¹ session ê°’ì„ ë¿Œë ¤ì£¼ì–´ í˜ì´ì§• ì²˜ë¦¬ë¥¼ êµ¬í˜„<br>

### ì¢Œì„ì²˜ë¦¬ğŸª‘

ì˜ˆì•½ëœ ì¢Œì„ì˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì¢Œì„ì„ í™”ë©´ì— ë„ì›Œì£¼ê¸° ì „ ì˜ˆì•½ëœ ì¢Œì„ì˜ ë²„íŠ¼ì„ ë¹„í™œì„±í™” í•˜ì˜€ìŒ.<br>
ì˜í™”,ìƒì˜ê´€,ë‚ ì§œ,ì‹œê°„ì„ ë„˜ê²¨ì£¼ì–´ í•´ë‹¹í•˜ëŠ” ì˜ˆì•½ë‚´ì—­ì´ ìˆëŠ”ì§€ í™•ì¸<br>
ì•„ë˜ ë§í¬ ì°¸ê³  <br>

[ì„ íƒí•œ ì¢Œì„ì²˜ë¦¬ js ğŸš—](https://github.com/Geun-Hwan/Movie_Project/blob/master/WebContent/resources/js/seat.js)

[ì˜ˆì•½ëœ ì¢Œì„ì²˜ë¦¬ js ğŸš— ](https://github.com/Geun-Hwan/Movie_Project/blob/master/WebContent/resources/js/ticket.js)

### ì°¸ê³ í•œ ë¸”ë¡œê·¸

https://hoing.io/archives/24492

https://velog.io/@kiki3700/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%98%A4%EB%9D%BC%ED%81%B4-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-db-%EC%97%B0%EA%B2%B0autonomous-database#applicationpropertiesdata-source

https://drsggg.tistory.com/403

https://chlee21.tistory.com/170

https://electronlibrary.tistory.com/342

https://loy124.tistory.com/193

https://mchch.tistory.com/140?category=896023

https://bemeal2.tistory.com/44
